# Table Compiler

TableCompiler is a build tool to convert structures and classes into the file and memory SDNA tables.
It reads from a list of input files that are provided via the command line.


1. [Table Compiler](#table-compiler)
   1. [Output](#output)

```txt
Uasge: TableCompiler.exe tablename ofilename ifile[0] ... ifile[n]
```

|  Argument   |                    Description                    |
| :---------: | :-----------------------------------------------: |
|  tablename  |     A unique name for the output table array.     |
|  ofilename  | Output file and path name for the generated code. |
| ifile[0..n] |      Input API declaration file(s) to parse.      |

## Output

The output should included into to the library that contains the rest of the custom file format implementation.

```c
unsigned char DocsExampleTables[]={
0x53,0x44,0x4E,0x41,0x4E,0x41,0x4D,0x45,0x03,0x00,0x00,0x00,
0x78,0x00,0x79,0x00,0x7A,0x00,0x62,0x79,0x54,0x59,0x50,0x45,
0x0B,0x00,0x00,0x00,0x63,0x68,0x61,0x72,0x00,0x75,0x63,0x68,
0x61,0x72,0x00,0x73,0x68,0x6F,0x72,0x74,0x00,0x75,0x73,0x68,
0x6F,0x72,0x74,0x00,0x69,0x6E,0x74,0x00,0x6C,0x6F,0x6E,0x67,
0x00,0x75,0x6C,0x6F,0x6E,0x67,0x00,0x66,0x6C,0x6F,0x61,0x74,
0x00,0x64,0x6F,0x75,0x62,0x6C,0x65,0x00,0x76,0x6F,0x69,0x64,
0x00,0x76,0x65,0x63,0x33,0x66,0x00,0x62,0x54,0x4C,0x45,0x4E,
0x01,0x00,0x01,0x00,0x02,0x00,0x02,0x00,0x04,0x00,0x04,0x00,
0x04,0x00,0x04,0x00,0x08,0x00,0x00,0x00,0x0C,0x00,0x40,0x40,
0x53,0x54,0x52,0x43,0x01,0x00,0x00,0x00,0x0A,0x00,0x03,0x00,
0x07,0x00,0x00,0x00,0x07,0x00,0x01,0x00,0x07,0x00,0x02,0x00,
};
int DocsExampleLen=sizeof(DocsExampleTables);


```

The pure virtual methods in [ftFile](https://github.com/snailrose/FileTools/blob/master/File/ftFile.h) provide a way for the loader to access the compiler output.

```c
virtual void*       getTables(void) = 0;
virtual FBTsize     getTableSize(void) = 0;
```

```c
#include "DocsExample.inl"

void* DocsExample::getTables(void)
{
    return (void*)DocsExampleTables;
}

FBTsize DocsExample::getTableSize(void)
{
    return DocsExampleLen;
}
```


The [TableCompiler](https://github.com/snailrose/FileTools/blob/master/CMake/Readme.md) CMAKE utility can be used to attach table generation to a build. This macro outputs the include file to the current build directory then adds the build directory to the list of include paths.
